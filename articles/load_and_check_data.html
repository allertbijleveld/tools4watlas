<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Loading and checking data • tools4watlas</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Loading and checking data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tools4watlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/load_and_check_data.html">Loading and checking data</a></li>
    <li><a class="dropdown-item" href="../articles/plot_data.html">Plotting data</a></li>
    <li><a class="dropdown-item" href="../articles/process_data.html">Processing data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/allertbijleveld/tools4watlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Loading and checking data</h1>
                        <h4 data-toc-skip class="author">Johannes
Krietsch</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/allertbijleveld/tools4watlas/blob/master/vignettes/load_and_check_data.Rmd" class="external-link"><code>vignettes/load_and_check_data.Rmd</code></a></small>
      <div class="d-none name"><code>load_and_check_data.Rmd</code></div>
    </div>

    
    
<div class="section level4">
<h4 id="good-to-know">Good to know<a class="anchor" aria-label="anchor" href="#good-to-know"></a>
</h4>
<p><code>tools4watlas</code> is based on <code>data.table</code> to be
fast and efficient. A key feature of <code>data.table</code> is
modification in place, where data is changed without making a copy. To
prevent this (whenever it is not desired) use the function
<code><a href="https://rdrr.io/pkg/data.table/man/copy.html" class="external-link">copy()</a></code> to make a true copy of the data set.</p>
<p>Most <code>tools4watlas</code> function run on collections of lists
<code><a href="https://rdrr.io/r/base/split.html" class="external-link">split()</a></code> by individual (tag ID) to keep the data separated
and allow for easy parallel computing (if necessary).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allertbijleveld.github.io/tools4watlas/" class="external-link">tools4watlas</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">##   object 'type_sum.accel' not found</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-data">Getting data<a class="anchor" aria-label="anchor" href="#getting-data"></a>
</h2>
<p>WATLAS data can either be loaded from a local SQLite database or a
rem remote SQL database server. To do so, first select the tags and time
period for which to extract data.</p>
<p>Use the <code>tags_watlas_all.xlsx</code> file (including metadata of
all tags) or for collaborators the <code>tags_watlas_subset.xlsx</code>
(including a subset of metadata) to select the desired tags. Here shown
with the example data in <code>tools4watlas</code>.</p>
<p>Loading the <code>tags_watlas_subset.xlsx</code> will provide a table
with the following columns:</p>
<table class="table">
<thead><tr class="header">
<th>Column</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>season</strong></td>
<td>Year in which the bird was caught</td>
</tr>
<tr class="even">
<td><strong>species</strong></td>
<td>Species common name</td>
</tr>
<tr class="odd">
<td><strong>tag</strong></td>
<td>Tag ID with 4 digits</td>
</tr>
<tr class="even">
<td><strong>rings</strong></td>
<td>Metal ring number</td>
</tr>
<tr class="odd">
<td><strong>crc</strong></td>
<td>Colour ring combo</td>
</tr>
<tr class="even">
<td><strong>release_ts</strong></td>
<td>Release time stamp in CET</td>
</tr>
<tr class="odd">
<td><strong>catch_location</strong></td>
<td>Location where the bird was caught</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="select-the-desired-tags-and-time-period">Select the desired tags and time period<a class="anchor" aria-label="anchor" href="#select-the-desired-tags-and-time-period"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load meta data</span></span>
<span><span class="va">all_tags_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata"</span>, <span class="st">"tags_watlas_subset.xlsx"</span>, package <span class="op">=</span> <span class="st">"tools4watlas"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">all_tags</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span><span class="va">all_tags_path</span>, sheet <span class="op">=</span> <span class="st">"tags_watlas_all"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subset desired tags using data.table</span></span>
<span><span class="co"># (For example red knots and redshank from season 2023)</span></span>
<span><span class="va">tags</span> <span class="op">&lt;-</span> <span class="va">all_tags</span><span class="op">[</span><span class="va">season</span> <span class="op">==</span> <span class="fl">2023</span> <span class="op">&amp;</span> <span class="va">species</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red knot"</span>, <span class="st">"redshank"</span><span class="op">)</span><span class="op">]</span><span class="op">$</span><span class="va">tag</span></span>
<span></span>
<span><span class="co"># Time period for which data should be extracted form the database (in CET)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="st">"2023-10-01 12:00:00"</span></span>
<span><span class="va">to</span> <span class="op">&lt;-</span> <span class="st">"2023-10-02 12:00:00"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="extract-data-from-local-sqlite-file">Extract data from local SQLite file<a class="anchor" aria-label="anchor" href="#extract-data-from-local-sqlite-file"></a>
</h4>
<p>First, the path and file name of the local SQLite database need to be
provided. Then, with the established connection, the database can be
queried for the selected tags and period. Here we will load the tagging
data in a list where each entry is a data.frame with data of one
tag.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Database connection</span></span>
<span><span class="va">sqlite_db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata"</span>, <span class="st">"watlas_example.SQLite"</span>, package <span class="op">=</span> <span class="st">"tools4watlas"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu">dbConnect</span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">sqlite_db</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data from database</span></span>
<span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>  <span class="va">tags</span>,</span>
<span>  <span class="va">atl_get_data</span>,</span>
<span>  tracking_time_start <span class="op">=</span> <span class="va">from</span>,</span>
<span>  tracking_time_end <span class="op">=</span> <span class="va">to</span>,</span>
<span>  timezone <span class="op">=</span> <span class="st">"CET"</span>,</span>
<span>  use_connection <span class="op">=</span> <span class="va">con</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Close connection</span></span>
<span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu">dbDisconnect</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="alternatively-extract-from-remote-sql-database">Alternatively, extract from remote SQL-database<a class="anchor" aria-label="anchor" href="#alternatively-extract-from-remote-sql-database"></a>
</h4>
<p>Does the same as when connecting to a local SQLite database. In this
example (chunk not run and only shown) we load the last three days of
data from all tags of season 2024. Host, database, username and password
have to be specified.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load meta data</span></span>
<span><span class="va">all_tags_path</span> <span class="op">&lt;-</span> <span class="st">"C:\\path\\tags_watlas_all.xlsx"</span></span>
<span><span class="va">all_tags</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span><span class="va">all_tags_path</span>, sheet <span class="op">=</span> <span class="st">"tags_watlas_all"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subset all tags from 2024</span></span>
<span><span class="va">tags</span> <span class="op">&lt;-</span> <span class="va">all_tags</span><span class="op">[</span><span class="va">season</span> <span class="op">==</span> <span class="fl">2024</span><span class="op">]</span><span class="op">$</span><span class="va">tagID</span></span>
<span></span>
<span><span class="co"># Select N last days to get data from</span></span>
<span><span class="va">days</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">86400</span> <span class="op">*</span> <span class="va">days</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">to</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fl">3600</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data from database</span></span>
<span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>  <span class="va">tags</span>,</span>
<span>  <span class="va">atl_get_data</span>,</span>
<span>  tracking_time_start <span class="op">=</span> <span class="va">from</span>,</span>
<span>  tracking_time_end <span class="op">=</span> <span class="va">to</span>,</span>
<span>  timezone <span class="op">=</span> <span class="st">"CET"</span>,</span>
<span>  host <span class="op">=</span> <span class="st">"host"</span>,</span>
<span>  database <span class="op">=</span> <span class="st">"db"</span>,</span>
<span>  username <span class="op">=</span> <span class="st">"username"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"password"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-explanation">Data explanation<a class="anchor" aria-label="anchor" href="#data-explanation"></a>
</h2>
<p>The resulting loaded WATLAS data will be a collection of lists split
by tag.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show first 5 rows of the first list</span></span>
<span><span class="va">data_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="7%">
<col width="6%">
<col width="13%">
<col width="24%">
<col width="10%">
<col width="9%">
<col width="4%">
<col width="7%">
<col width="8%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="right">posID</th>
<th align="left">tag</th>
<th align="right">time</th>
<th align="left">datetime</th>
<th align="right">x</th>
<th align="right">y</th>
<th align="right">nbs</th>
<th align="right">varx</th>
<th align="right">vary</th>
<th align="right">covxy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">3040</td>
<td align="right">1696154919</td>
<td align="left">2023-10-01 10:08:39</td>
<td align="right">650694.1</td>
<td align="right">5902569</td>
<td align="right">3</td>
<td align="right">44.25</td>
<td align="right">112.78</td>
<td align="right">45.05</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">3040</td>
<td align="right">1696154922</td>
<td align="left">2023-10-01 10:08:42</td>
<td align="right">650694.1</td>
<td align="right">5902571</td>
<td align="right">3</td>
<td align="right">50.44</td>
<td align="right">60.84</td>
<td align="right">32.48</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">3040</td>
<td align="right">1696154928</td>
<td align="left">2023-10-01 10:08:48</td>
<td align="right">650694.1</td>
<td align="right">5902573</td>
<td align="right">3</td>
<td align="right">44.08</td>
<td align="right">64.09</td>
<td align="right">31.28</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">3040</td>
<td align="right">1696154931</td>
<td align="left">2023-10-01 10:08:51</td>
<td align="right">650694.1</td>
<td align="right">5902574</td>
<td align="right">3</td>
<td align="right">50.26</td>
<td align="right">79.94</td>
<td align="right">37.77</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">3040</td>
<td align="right">1696154934</td>
<td align="left">2023-10-01 10:08:54</td>
<td align="right">650692.7</td>
<td align="right">5902574</td>
<td align="right">3</td>
<td align="right">47.88</td>
<td align="right">83.48</td>
<td align="right">37.93</td>
</tr>
</tbody>
</table>
<p>Loading the WATLAS data will provide a data frame with different
columns representing:</p>
<table class="table">
<colgroup>
<col width="16%">
<col width="84%">
</colgroup>
<thead><tr class="header">
<th>Column</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>posID</strong></td>
<td>Unique number for localizations</td>
</tr>
<tr class="even">
<td><strong>tag</strong></td>
<td>4 digit tag number (character), i.e. last 4 digits of the full tag
number</td>
</tr>
<tr class="odd">
<td><strong>time</strong></td>
<td>UNIX time (seconds)</td>
</tr>
<tr class="even">
<td><strong>datetime</strong></td>
<td>Datetime in POSIXct (UTC)</td>
</tr>
<tr class="odd">
<td><strong>x</strong></td>
<td>X-cordinates in meters (UTM 31 N)</td>
</tr>
<tr class="even">
<td><strong>y</strong></td>
<td>Y-cordinates in meters (UTM 31 N)</td>
</tr>
<tr class="odd">
<td><strong>nbs</strong></td>
<td>Number of Base Stations used in calculating coordinates</td>
</tr>
<tr class="even">
<td><strong>varx</strong></td>
<td>Variance in estimating X-coordinates</td>
</tr>
<tr class="odd">
<td><strong>vary</strong></td>
<td>Variance in estimating Y-coordinates</td>
</tr>
<tr class="even">
<td><strong>covxy</strong></td>
<td>Co-variance between X- and Y-coordinates</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="check-data">Check data<a class="anchor" aria-label="anchor" href="#check-data"></a>
</h2>
<div class="section level4">
<h4 id="data-summary">Data summary<a class="anchor" aria-label="anchor" href="#data-summary"></a>
</h4>
<p>Here we simply check for how many individuals we have data and how
many positions by tag and date we have.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bind data into one data.table</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="va">data_list</span>, fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># N individuals with tagging data</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="va">.N</span>, <span class="va">tag</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 3</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># N positions, first and last data by tag ID</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span></span>
<span>  N_positions <span class="op">=</span> <span class="va">.N</span>,</span>
<span>  fist_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">datetime</span><span class="op">)</span>,</span>
<span>  last_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">datetime</span><span class="op">)</span></span>
<span><span class="op">)</span>, <span class="va">tag</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##       tag N_positions           fist_data           last_data</span></span>
<span><span class="co">##    &lt;char&gt;       &lt;int&gt;              &lt;POSc&gt;              &lt;POSc&gt;</span></span>
<span><span class="co">## 1:   3040        5779 2023-10-01 10:08:39 2023-10-02 09:59:59</span></span>
<span><span class="co">## 2:   3085        3453 2023-10-01 10:00:01 2023-10-02 09:41:16</span></span>
<span><span class="co">## 3:   3086        3548 2023-10-01 10:00:01 2023-10-02 09:59:42</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add data</span></span>
<span><span class="va">data</span><span class="op">[</span>, <span class="va">date</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">datetime</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># N positions by species and day</span></span>
<span><span class="va">data_subset</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">tag</span>, <span class="va">date</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridis/" class="external-link">viridis</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data_subset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">tag</span>, fill <span class="op">=</span> <span class="va">N</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://sjmgarnier.github.io/viridis/reference/scale_viridis.html" class="external-link">scale_fill_viridis</a></span><span class="op">(</span></span>
<span>    option <span class="op">=</span> <span class="st">"A"</span>, discrete <span class="op">=</span> <span class="cn">FALSE</span>, trans <span class="op">=</span> <span class="st">"log10"</span>, name <span class="op">=</span> <span class="st">"N positions"</span>,</span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/trans_breaks.html" class="external-link">trans_breaks</a></span><span class="op">(</span><span class="st">"log10"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">10</span><span class="op">^</span><span class="va">x</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/trans_format.html" class="external-link">trans_format</a></span><span class="op">(</span><span class="st">"log10"</span>, <span class="fu"><a href="https://scales.r-lib.org/reference/parse_format.html" class="external-link">math_format</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Tag"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="load_and_check_data_files/figure-html/unnamed-chunk-6-1.png" alt="Number of positions per day by tag" width="100%"><p class="caption">
Number of positions per day by tag
</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Allert Bijleveld, Pratik Gupte, Christine Beardsworth, Johannes Krietsch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
