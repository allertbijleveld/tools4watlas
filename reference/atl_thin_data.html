<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Thin tracking data by resampling or aggregation — atl_thin_data • tools4watlas</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Thin tracking data by resampling or aggregation — atl_thin_data"><meta name="description" content="Uniformly reduce data volumes with either aggregation or resampling
(specified by the method argument) over an interval specified in
seconds using the interval argument.
Both options make two important assumptions:
(1) that timestamps are named 'time' and 'datetime', and
(2) all columns except the identity columns can be averaged in R.
While the 'subsample' option returns a thinned dataset with all columns from
the input data, the 'aggregate' option drops the column covxy, since
this cannot be propagated to the averaged position.
Both options handle the column 'time' differently: while 'subsample' returns
the actual timestamp (in UNIX time) of each sample, 'aggregate' returns the
mean timestamp (also in UNIX time).
In both cases, an extra column, time_agg, is added which has a uniform
difference between each element corresponding to the user-defined thinning
interval.
The 'aggregate' option only recognises errors named varx and
vary.
If all of these columns are not present together the function assumes there
is no measure of error, and drops those columns.
If there is actually no measure of error, the function simply returns the
averaged position and covariates in each time interval.
Grouping variables' names (such as animal identity) may be passed as a
character vector to the id_columns argument."><meta property="og:description" content="Uniformly reduce data volumes with either aggregation or resampling
(specified by the method argument) over an interval specified in
seconds using the interval argument.
Both options make two important assumptions:
(1) that timestamps are named 'time' and 'datetime', and
(2) all columns except the identity columns can be averaged in R.
While the 'subsample' option returns a thinned dataset with all columns from
the input data, the 'aggregate' option drops the column covxy, since
this cannot be propagated to the averaged position.
Both options handle the column 'time' differently: while 'subsample' returns
the actual timestamp (in UNIX time) of each sample, 'aggregate' returns the
mean timestamp (also in UNIX time).
In both cases, an extra column, time_agg, is added which has a uniform
difference between each element corresponding to the user-defined thinning
interval.
The 'aggregate' option only recognises errors named varx and
vary.
If all of these columns are not present together the function assumes there
is no measure of error, and drops those columns.
If there is actually no measure of error, the function simply returns the
averaged position and covariates in each time interval.
Grouping variables' names (such as animal identity) may be passed as a
character vector to the id_columns argument."><meta property="og:image" content="https://allertbijleveld.github.io/tools4watlas/, https://krietsch.github.io/tools4watlas/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tools4watlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic_workflows.html">Basic workflow</a></li>
    <li><a class="dropdown-item" href="../articles/load_and_check_data.html">Loading and checking data</a></li>
    <li><a class="dropdown-item" href="../articles/plot_data.html">Plotting data</a></li>
    <li><a class="dropdown-item" href="../articles/process_data.html">Processing data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/allertbijleveld/tools4watlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Thin tracking data by resampling or aggregation</h1>
      <small class="dont-index">Source: <a href="https://github.com/allertbijleveld/tools4watlas/blob/master/R/fun_thin_data.R" class="external-link"><code>R/fun_thin_data.R</code></a></small>
      <div class="d-none name"><code>atl_thin_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uniformly reduce data volumes with either aggregation or resampling
(specified by the <code>method</code> argument) over an interval specified in
seconds using the <code>interval</code> argument.
Both options make two important assumptions:
(1) that timestamps are named 'time' and 'datetime', and
(2) all columns except the identity columns can be averaged in <code>R</code>.
While the 'subsample' option returns a thinned dataset with all columns from
the input data, the 'aggregate' option drops the column <code>covxy</code>, since
this cannot be propagated to the averaged position.
Both options handle the column 'time' differently: while 'subsample' returns
the actual timestamp (in UNIX time) of each sample, 'aggregate' returns the
mean timestamp (also in UNIX time).
In both cases, an extra column, <code>time_agg</code>, is added which has a uniform
difference between each element corresponding to the user-defined thinning
interval.
The 'aggregate' option only recognises errors named <code>varx</code> and
<code>vary</code>.
If all of these columns are not present together the function assumes there
is no measure of error, and drops those columns.
If there is actually no measure of error, the function simply returns the
averaged position and covariates in each time interval.
Grouping variables' names (such as animal identity) may be passed as a
character vector to the <code>id_columns</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">atl_thin_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  interval <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  id_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"subsample"</span>, <span class="st">"aggregate"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Tracking data to aggregate. Must have columns <code>x</code> and
<code>y</code>, and a numeric column named <code>time</code>, as well as <code>datetime</code>.</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>The interval in seconds over which to aggregate.</p></dd>


<dt id="arg-id-columns">id_columns<a class="anchor" aria-label="anchor" href="#arg-id-columns"></a></dt>
<dd><p>Column names for grouping columns.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Should the data be thinned by subsampling or aggregation.
If resampling (<code>method = "subsample"</code>), the first position of each group
is taken. If aggregation (<code>method = "aggregate"</code>), the group positions'
mean is taken.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.table with aggregated or subsampled data.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pratik Gupte &amp; Allert Bijleveld &amp; Johannes Krietsch</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1696218721</span>, <span class="fl">1696218721</span> <span class="op">+</span> <span class="fl">92</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">[</span>, <span class="va">datetime</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">time</span>, origin <span class="op">=</span> <span class="st">"1970-01-01"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        tag       time         x        y            datetime</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;char&gt;      &lt;num&gt;     &lt;num&gt;    &lt;num&gt;              &lt;POSc&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1 1696218721  8.599956 15.46815 2023-10-02 03:52:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1 1696218731 10.255317 15.36295 2023-10-02 03:52:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1 1696218741  7.562736 13.69546 2023-10-02 03:52:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1 1696218751  9.994429 15.73778 2023-10-02 03:52:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1 1696218761 10.621553 16.88850 2023-10-02 03:52:41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1 1696218771 11.148412 14.90255 2023-10-02 03:52:51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      1 1696218781  8.178182 14.06415 2023-10-02 03:53:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      1 1696218791  9.752675 14.98405 2023-10-02 03:53:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      1 1696218801  9.755800 14.17321 2023-10-02 03:53:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      1 1696218811  9.717295 13.48760 2023-10-02 03:53:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2 1696218721  9.446301 15.93536 2023-10-02 03:52:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      2 1696218731 10.628982 15.17649 2023-10-02 03:52:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:      2 1696218741 12.065025 15.24369 2023-10-02 03:52:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:      2 1696218751  8.369011 16.62355 2023-10-02 03:52:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:      2 1696218761 10.512427 15.11204 2023-10-02 03:52:41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:      2 1696218771  8.136989 14.86600 2023-10-02 03:52:51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:      2 1696218781  9.477987 13.08991 2023-10-02 03:53:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:      2 1696218791  9.947398 14.72076 2023-10-02 03:53:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:      2 1696218801 10.542996 14.68655 2023-10-02 03:53:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:      2 1696218811  9.085925 16.06731 2023-10-02 03:53:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        tag       time         x        y            datetime</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Thin the data by aggregation with a 60-second interval</span></span></span>
<span class="r-in"><span><span class="va">thinned_aggregated</span> <span class="op">&lt;-</span> <span class="fu">atl_thin_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  interval <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  id_columns <span class="op">=</span> <span class="st">"tag"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"aggregate"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Thin the data by subsampling with a 60-second interval</span></span></span>
<span class="r-in"><span><span class="va">thinned_subsampled</span> <span class="op">&lt;-</span> <span class="fu">atl_thin_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  interval <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  id_columns <span class="op">=</span> <span class="st">"tag"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"subsample"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">thinned_aggregated</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       tag       time        x        y            datetime n_aggregated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;      &lt;num&gt;    &lt;num&gt;    &lt;num&gt;              &lt;POSc&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      1 1696218720 9.697067 15.34257 2023-10-02 03:52:00            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      1 1696218780 9.350988 14.17725 2023-10-02 03:53:00            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      2 1696218720 9.859789 15.49285 2023-10-02 03:52:00            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      2 1696218780 9.763577 14.64113 2023-10-02 03:53:00            4</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">thinned_subsampled</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       tag       time        x        y            datetime n_subsampled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;      &lt;num&gt;    &lt;num&gt;    &lt;num&gt;              &lt;POSc&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      1 1696218721 8.599956 15.46815 2023-10-02 03:52:01            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      1 1696218781 8.178182 14.06415 2023-10-02 03:53:01            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      2 1696218721 9.446301 15.93536 2023-10-02 03:52:01            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      2 1696218781 9.477987 13.08991 2023-10-02 03:53:01            4</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Allert Bijleveld, Pratik Gupte, Christine Beardsworth, Johannes Krietsch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

