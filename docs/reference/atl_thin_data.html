<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Thin tracking data by resampling or aggregation — atl_thin_data • tools4watlas</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Thin tracking data by resampling or aggregation — atl_thin_data"><meta name="description" content="Uniformly reduce data volumes with either aggregation or resampling
(specified by the method argument) over an interval specified in
seconds using the interval argument.
Both options make two important assumptions:
(1) that timestamps are named 'time' and 'datetime', and
(2) all columns except the identity columns can be averaged in R.
While the 'subsample' option returns a thinned dataset with all columns from
the input data, the 'aggregate' option drops the column covxy, since
this cannot be propagated to the averaged position.
Both options handle the column 'time' differently: while 'subsample' returns
the actual timestamp (in UNIX time) of each sample, 'aggregate' returns the
mean timestamp (also in UNIX time).
The 'aggregate' option only recognises errors named varx and
vary.
If all of these columns are not present together the function assumes there
is no measure of error, and drops those columns.
If there is actually no measure of error, the function simply returns the
averaged position and covariates in each time interval.
Grouping variables' names (such as animal identity) may be passed as a
character vector to the id_columns argument."><meta property="og:description" content="Uniformly reduce data volumes with either aggregation or resampling
(specified by the method argument) over an interval specified in
seconds using the interval argument.
Both options make two important assumptions:
(1) that timestamps are named 'time' and 'datetime', and
(2) all columns except the identity columns can be averaged in R.
While the 'subsample' option returns a thinned dataset with all columns from
the input data, the 'aggregate' option drops the column covxy, since
this cannot be propagated to the averaged position.
Both options handle the column 'time' differently: while 'subsample' returns
the actual timestamp (in UNIX time) of each sample, 'aggregate' returns the
mean timestamp (also in UNIX time).
The 'aggregate' option only recognises errors named varx and
vary.
If all of these columns are not present together the function assumes there
is no measure of error, and drops those columns.
If there is actually no measure of error, the function simply returns the
averaged position and covariates in each time interval.
Grouping variables' names (such as animal identity) may be passed as a
character vector to the id_columns argument."><meta property="og:image" content="https://allertbijleveld.github.io/tools4watlas/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tools4watlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Basic workflow (Vignettes)</h6></li>
    <li><a class="dropdown-item" href="../articles/load_and_check_data.html">Step 1: Load and check data</a></li>
    <li><a class="dropdown-item" href="../articles/filter_data.html">Step 2: Filter data</a></li>
    <li><a class="dropdown-item" href="../articles/smooth_and_thin_data.html">Step 3: Smooth and thin data</a></li>
    <li><a class="dropdown-item" href="../articles/add_tidal_data.html">Step 4: Add tidal data</a></li>
    <li><a class="dropdown-item" href="../articles/plot_data.html">Plot data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/additional_tutorials/fast_plotting.html">Fast plotting</a></li>
    <li><a class="dropdown-item" href="../articles/additional_tutorials/add_and_plot_bathymetry_data.html">Add and plot bathymetry data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Package development</h6></li>
    <li><a class="dropdown-item" href="../articles/package_development/package_maintenance.html">Package maintenance</a></li>
    <li><a class="dropdown-item" href="../articles/package_development/basemap_data.html">Basemap data</a></li>
    <li><a class="dropdown-item" href="../articles/package_development/package_logo.html">tools4watlas logo</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/literature/literature.html">Literature</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/allertbijleveld/tools4watlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Thin tracking data by resampling or aggregation</h1>
      <small class="dont-index">Source: <a href="https://github.com/allertbijleveld/tools4watlas/blob/HEAD/R/fun_thin_data.R" class="external-link"><code>R/fun_thin_data.R</code></a></small>
      <div class="d-none name"><code>atl_thin_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uniformly reduce data volumes with either aggregation or resampling
(specified by the <code>method</code> argument) over an interval specified in
seconds using the <code>interval</code> argument.
Both options make two important assumptions:
(1) that timestamps are named 'time' and 'datetime', and
(2) all columns except the identity columns can be averaged in <code>R</code>.
While the 'subsample' option returns a thinned dataset with all columns from
the input data, the 'aggregate' option drops the column <code>covxy</code>, since
this cannot be propagated to the averaged position.
Both options handle the column 'time' differently: while 'subsample' returns
the actual timestamp (in UNIX time) of each sample, 'aggregate' returns the
mean timestamp (also in UNIX time).
The 'aggregate' option only recognises errors named <code>varx</code> and
<code>vary</code>.
If all of these columns are not present together the function assumes there
is no measure of error, and drops those columns.
If there is actually no measure of error, the function simply returns the
averaged position and covariates in each time interval.
Grouping variables' names (such as animal identity) may be passed as a
character vector to the <code>id_columns</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">atl_thin_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  interval <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  id_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"subsample"</span>, <span class="st">"aggregate"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Tracking data to aggregate. Must have columns <code>x</code> and
<code>y</code>, and a numeric column named <code>time</code>, as well as <code>datetime</code>.</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>The interval in seconds over which to aggregate.</p></dd>


<dt id="arg-id-columns">id_columns<a class="anchor" aria-label="anchor" href="#arg-id-columns"></a></dt>
<dd><p>Column names for grouping columns.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Should the data be thinned by subsampling or aggregation.
If resampling (<code>method = "subsample"</code>), the first position of each group
is taken. If aggregation (<code>method = "aggregate"</code>), the group positions'
mean is taken.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.table with aggregated or subsampled data.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pratik Gupte &amp; Allert Bijleveld &amp; Johannes Krietsch</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1696218721</span>, <span class="fl">1696218721</span> <span class="op">+</span> <span class="fl">92</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">[</span>, <span class="va">datetime</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">time</span>, origin <span class="op">=</span> <span class="st">"1970-01-01"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        tag       time         x        y            datetime</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;char&gt;      &lt;num&gt;     &lt;num&gt;    &lt;num&gt;              &lt;POSc&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1 1696218721  9.313147 13.86186 2023-10-02 03:52:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1 1696218731  9.554338 16.25381 2023-10-02 03:52:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1 1696218741 11.224082 15.42646 2023-10-02 03:52:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1 1696218751 10.359814 14.70493 2023-10-02 03:52:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1 1696218761 10.400771 15.89513 2023-10-02 03:52:41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1 1696218771 10.110683 15.87813 2023-10-02 03:52:51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      1 1696218781  9.444159 15.82158 2023-10-02 03:53:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      1 1696218791 11.786913 15.68864 2023-10-02 03:53:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      1 1696218801 10.497850 15.55392 2023-10-02 03:53:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      1 1696218811  8.033383 14.93809 2023-10-02 03:53:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2 1696218721 10.701356 14.69404 2023-10-02 03:52:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      2 1696218731  9.527209 14.61953 2023-10-02 03:52:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:      2 1696218741  8.932176 14.30529 2023-10-02 03:52:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:      2 1696218751  9.782025 14.79208 2023-10-02 03:52:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:      2 1696218761  8.973996 13.73460 2023-10-02 03:52:41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:      2 1696218771  9.271109 17.16896 2023-10-02 03:52:51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:      2 1696218781  9.374961 16.20796 2023-10-02 03:53:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:      2 1696218791  8.313307 13.87689 2023-10-02 03:53:11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:      2 1696218801 10.837787 14.59712 2023-10-02 03:53:21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:      2 1696218811 10.153373 14.53334 2023-10-02 03:53:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        tag       time         x        y            datetime</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Thin the data by aggregation with a 60-second interval</span></span></span>
<span class="r-in"><span><span class="va">thinned_aggregated</span> <span class="op">&lt;-</span> <span class="fu">atl_thin_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  interval <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  id_columns <span class="op">=</span> <span class="st">"tag"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"aggregate"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Thin the data by subsampling with a 60-second interval</span></span></span>
<span class="r-in"><span><span class="va">thinned_subsampled</span> <span class="op">&lt;-</span> <span class="fu">atl_thin_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  interval <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  id_columns <span class="op">=</span> <span class="st">"tag"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"subsample"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">thinned_aggregated</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       tag       time         x        y            datetime n_aggregated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;      &lt;num&gt;     &lt;num&gt;    &lt;num&gt;              &lt;POSc&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      1 1696218720 10.160472 15.33672 2023-10-02 03:52:00            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      1 1696218780  9.940576 15.50056 2023-10-02 03:53:00            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      2 1696218720  9.531312 14.88575 2023-10-02 03:52:00            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      2 1696218780  9.669857 14.80383 2023-10-02 03:53:00            4</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">thinned_subsampled</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       tag       time         x        y            datetime n_subsampled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;      &lt;num&gt;     &lt;num&gt;    &lt;num&gt;              &lt;POSc&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      1 1696218721  9.313147 13.86186 2023-10-02 03:52:01            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      1 1696218781  9.444159 15.82158 2023-10-02 03:53:01            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      2 1696218721 10.701356 14.69404 2023-10-02 03:52:01            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      2 1696218781  9.374961 16.20796 2023-10-02 03:53:01            4</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Allert Bijleveld, Pratik Gupte, Christine Beardsworth, Johannes Krietsch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

