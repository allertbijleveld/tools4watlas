<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Add tidal and bathymetry data • tools4watlas</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="Add tidal and bathymetry data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">tools4watlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Basic workflow (Vignettes)</h6></li>
    <li><a class="dropdown-item" href="../../articles/load_and_check_data.html">Load and check data</a></li>
    <li><a class="dropdown-item" href="../../articles/filter_data.html">Filter data</a></li>
    <li><a class="dropdown-item" href="../../articles/smooth_and_thin_data.html">Smooth and thin data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extended workflow</h6></li>
    <li><a class="dropdown-item" href="../../articles/extended_workflow/add_tidal_and_bathymetry_data.html">Add tidal and bathymetry data</a></li>
    <li><a class="dropdown-item" href="../../articles/extended_workflow/cluster_data_in_residency_patches.html">Clustering in residency patches</a></li>
    <li><a class="dropdown-item" href="../../articles/extended_workflow/add_SIBES_data.html">Add SIBES data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Visualization tutorials</h6></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/create_basemap.html">Create a basemap</a></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/plot_data.html">Plot data</a></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/plot_data_in_loop.html">Plot data in loop</a></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/plot_data_faster.html">Plot data faster</a></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/plot_data_interactively.html">Plot data interactively</a></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/plot_data_base_R.html">Plot data in base R - deprecated</a></li>
    <li><a class="dropdown-item" href="../../articles/visualization_tutorials/animate_data.html">Animate data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Package development</h6></li>
    <li><a class="dropdown-item" href="../../articles/package_development/package_maintenance.html">Package maintenance</a></li>
    <li><a class="dropdown-item" href="../../articles/package_development/basemap_data.html">Basemap data</a></li>
    <li><a class="dropdown-item" href="../../articles/package_development/package_logo.html">tools4watlas logo</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../articles/literature/literature.html">Literature</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/allertbijleveld/tools4watlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>Add tidal and bathymetry data</h1>
                        <h4 data-toc-skip class="author">Johannes
Krietsch</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/allertbijleveld/tools4watlas/blob/HEAD/vignettes/extended_workflow/add_tidal_and_bathymetry_data.Rmd" class="external-link"><code>vignettes/extended_workflow/add_tidal_and_bathymetry_data.Rmd</code></a></small>
      <div class="d-none name"><code>add_tidal_and_bathymetry_data.Rmd</code></div>
    </div>

    
    
<p>This article shows how to add tidal and bathymetry data to WATLAS
data and provides an example of how to subset by specific times witin
the tide and plot the data with bathymetry.</p>
<div class="section level4">
<h4 id="load-packages-and-movement-data">Load packages and movement data<a class="anchor" aria-label="anchor" href="#load-packages-and-movement-data"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allertbijleveld.github.io/tools4watlas/">tools4watlas</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Path to csv with raw data</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata"</span>, <span class="st">"watlas_data_aggregated.csv"</span>,</span>
<span>  package <span class="op">=</span> <span class="st">"tools4watlas"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">data_path</span>, yaml <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add-tidal-data">Add tidal data<a class="anchor" aria-label="anchor" href="#add-tidal-data"></a>
</h2>
<p>Tide data are from West-Terschelling and prepared by Allert. They are
located in the “WATLAS” SharePoint folder: <code>Documents/data/</code>.
Either specify the path to your local copy of this folder or add the
path for your user in the <code><a href="../../reference/atl_file_path.html">atl_file_path()</a></code> function.</p>
<p>The offset of 30 minutes is set to match Griend.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># file path to WATLAS teams data folder</span></span>
<span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_file_path.html">atl_file_path</a></span><span class="op">(</span><span class="st">"watlas_teams"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sub path to tide data</span></span>
<span><span class="va">tidal_pattern_fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>  <span class="va">fp</span>, <span class="st">"waterdata/allYears-tidalPattern-west_terschelling-UTC.csv"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">measured_water_height_fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>  <span class="va">fp</span>, <span class="st">"waterdata/allYears-gemeten_waterhoogte-west_terschelling-clean-UTC.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load tide data</span></span>
<span><span class="va">tidal_pattern</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">tidal_pattern_fp</span><span class="op">)</span></span>
<span><span class="va">measured_water_height</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">measured_water_height_fp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add tide data to movement data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_add_tidal_data.html">atl_add_tidal_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  tide_data <span class="op">=</span> <span class="va">tidal_pattern</span>,</span>
<span>  tide_data_highres <span class="op">=</span> <span class="va">measured_water_height</span>,</span>
<span>  waterdata_resolution <span class="op">=</span> <span class="st">"10 minute"</span>,</span>
<span>  offset <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show first 5 rows (subset of columns to show additional ones)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">tag</span>, <span class="va">datetime</span>, <span class="va">tideID</span>, <span class="va">tidaltime</span>, <span class="va">time2lowtide</span>,</span>
<span>              <span class="va">waterlevel</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="29%">
<col width="11%">
<col width="14%">
<col width="19%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="left">tag</th>
<th align="left">datetime</th>
<th align="right">tideID</th>
<th align="right">tidaltime</th>
<th align="right">time2lowtide</th>
<th align="right">waterlevel</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">3027</td>
<td align="left">2023-09-23 03:13:00</td>
<td align="right">2023513</td>
<td align="right">133</td>
<td align="right">-247</td>
<td align="right">52</td>
</tr>
<tr class="even">
<td align="left">3027</td>
<td align="left">2023-09-23 03:19:00</td>
<td align="right">2023513</td>
<td align="right">139</td>
<td align="right">-241</td>
<td align="right">45</td>
</tr>
<tr class="odd">
<td align="left">3027</td>
<td align="left">2023-09-23 03:20:00</td>
<td align="right">2023513</td>
<td align="right">140</td>
<td align="right">-240</td>
<td align="right">45</td>
</tr>
<tr class="even">
<td align="left">3027</td>
<td align="left">2023-09-23 03:21:00</td>
<td align="right">2023513</td>
<td align="right">141</td>
<td align="right">-239</td>
<td align="right">45</td>
</tr>
<tr class="odd">
<td align="left">3027</td>
<td align="left">2023-09-23 03:24:00</td>
<td align="right">2023513</td>
<td align="right">144</td>
<td align="right">-236</td>
<td align="right">45</td>
</tr>
<tr class="even">
<td align="left">3027</td>
<td align="left">2023-09-23 03:25:00</td>
<td align="right">2023513</td>
<td align="right">145</td>
<td align="right">-235</td>
<td align="right">39</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="add-bathymetry-data">Add bathymetry data<a class="anchor" aria-label="anchor" href="#add-bathymetry-data"></a>
</h2>
<p>A short example of how to add bathymetry data to WATLAS data.</p>
<p>Bathymetry data can be found in the “Birds, fish ’n chips” SharePoint
folder: <code>Documents/data/GIS/rasters/</code>. To run the script set
the file path (<code>fp</code>) to the local copy of the folder on your
computer. The data can also be downloaded from the <a href="https://datahuiswadden.openearth.nl/geonetwork/srv/eng/catalog.search#/metadata/JkrvJXasRSGAWU1mJLHUzg" class="external-link">Waddenregister</a>.</p>
<p>Extract bathymetry data for each location and coarsely classify time
in the tide cycle.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># file path to Birds, fish 'n chips GIS/rasters folder</span></span>
<span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_file_path.html">atl_file_path</a></span><span class="op">(</span><span class="st">"rasters"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load bathymetry data</span></span>
<span><span class="va">bat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">fp</span>, <span class="st">"bathymetry/2024/bodemhoogte_20mtr_UTM31_int.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add bathymetry data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_add_raster_data.html">atl_add_raster_data</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, raster_data <span class="op">=</span> <span class="va">bat</span>, new_name <span class="op">=</span> <span class="st">"bathymetry"</span>, change_unit <span class="op">=</span> <span class="fl">100</span> <span class="co"># m to cm</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show first 5 rows (subset of columns to show additional ones)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">tag</span>, <span class="va">datetime</span>, <span class="va">bathymetry</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">tag</th>
<th align="left">datetime</th>
<th align="right">bathymetry</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">3027</td>
<td align="left">2023-09-23 03:13:00</td>
<td align="right">84.29</td>
</tr>
<tr class="even">
<td align="left">3027</td>
<td align="left">2023-09-23 03:19:00</td>
<td align="right">86.83</td>
</tr>
<tr class="odd">
<td align="left">3027</td>
<td align="left">2023-09-23 03:20:00</td>
<td align="right">86.83</td>
</tr>
<tr class="even">
<td align="left">3027</td>
<td align="left">2023-09-23 03:21:00</td>
<td align="right">84.29</td>
</tr>
<tr class="odd">
<td align="left">3027</td>
<td align="left">2023-09-23 03:24:00</td>
<td align="right">121.75</td>
</tr>
<tr class="even">
<td align="left">3027</td>
<td align="left">2023-09-23 03:25:00</td>
<td align="right">84.29</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="save-as-example-data-for-tools4watlas-">Save as example data for <code>tools4watlas</code>.<a class="anchor" aria-label="anchor" href="#save-as-example-data-for-tools4watlas-"></a>
</h3>
<p>(This step is just to save the <code>tools4watlas</code> example
data)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># reassign so data_example is data and select two tides</span></span>
<span><span class="va">data_example</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">tideID</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2023513</span>, <span class="fl">2023514</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">data_example</span>, file <span class="op">=</span> <span class="st">"../../data/watlas_data_example.rda"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="example-filter-data-with-by-tide-and-plot-with-bathymetry-data">Example: Filter data with by tide and plot with bathymetry data<a class="anchor" aria-label="anchor" href="#example-filter-data-with-by-tide-and-plot-with-bathymetry-data"></a>
</h2>
<div class="section level3">
<h3 id="filter-data-with-specific-times-within-the-tide-cycle">Filter data with specific times within the tide cycle<a class="anchor" aria-label="anchor" href="#filter-data-with-specific-times-within-the-tide-cycle"></a>
</h3>
<p>To select localizations when mudlfats are available for foraging, we
can for example select a low tide period from -2.5 hours to +2.5 hours
around low tide <a href="https://royalsocietypublishing.org/doi/10.1098/rspb.2015.1557" class="external-link">(Bijleveld
et al. 2016)</a>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the low tide period for a particular tide as specified by tideID</span></span>
<span><span class="va">data_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_filter_covariates.html">atl_filter_covariates</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"tideID %in% c(2023513, 2023514)"</span>,</span>
<span>    <span class="st">"between(time2lowtide, -2.5 * 60, 2.5 * 60)"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note: 51.24% of the dataset was filtered out, corresponding to 3531 positions.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="plot-data-movement-data-with-bathymetry-data">Plot data movement data with bathymetry data<a class="anchor" aria-label="anchor" href="#plot-data-movement-data-with-bathymetry-data"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># additional packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridis/" class="external-link">viridis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># file path to WATLAS teams data folder</span></span>
<span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_file_path.html">atl_file_path</a></span><span class="op">(</span><span class="st">"rasters"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load bathymetry data</span></span>
<span><span class="va">bat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">fp</span>, <span class="st">"bathymetry/2024/bodemhoogte_20mtr_UTM31_int.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create base map with bathymetry data</span></span>
<span><span class="va">bm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/atl_create_bm.html">atl_create_bm</a></span><span class="op">(</span></span>
<span>  <span class="va">data_subset</span>,</span>
<span>  buffer <span class="op">=</span> <span class="fl">1000</span>, raster_data <span class="op">=</span> <span class="va">bat</span>, option <span class="op">=</span> <span class="st">"batymetry"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: [crop] CRS do not match</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot data</span></span>
<span><span class="va">bm</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data_subset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, group <span class="op">=</span> <span class="va">tag</span>, colour <span class="op">=</span> <span class="va">bathymetry</span><span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.1</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data_subset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, color <span class="op">=</span> <span class="va">bathymetry</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.7</span>, show.legend <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_colourbar.html" class="external-link">guide_colourbar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"inside"</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://sjmgarnier.github.io/viridis/reference/scale_viridis.html" class="external-link">scale_color_viridis</a></span><span class="op">(</span></span>
<span>    direction <span class="op">=</span> <span class="fl">1</span>, option <span class="op">=</span> <span class="st">"inferno"</span>, name <span class="op">=</span> <span class="st">"Bathymetry\n(cmNHM)"</span>,</span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">200</span>, <span class="fl">200</span><span class="op">)</span>, oob <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/oob.html" class="external-link">squish</a></span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position.inside <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.07</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    legend.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="add_tidal_and_bathymetry_data_files/figure-html/unnamed-chunk-6-1.png" alt="Movement tracks colored with bathymetry data" width="100%"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.nioz.nl/en/about/organisation/staff/allert-bijleveld" class="external-link">Allert Bijleveld</a>, <a href="https://github.com/pratikunterwegs" class="external-link">Pratik Gupte</a>, <a href="https://github.com/CBeardsworth" class="external-link">Christine Beardsworth</a>, <a href="https://github.com/krietsch" class="external-link">Johannes Krietsch</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
