<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Package maintenance • tools4watlas</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="Package maintenance">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">tools4watlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Basic workflow (Vignettes)</h6></li>
    <li><a class="dropdown-item" href="../../articles/load_and_check_data.html">Step 1: Load and check data</a></li>
    <li><a class="dropdown-item" href="../../articles/filter_data.html">Step 2: Filter data</a></li>
    <li><a class="dropdown-item" href="../../articles/smooth_and_thin_data.html">Step 3: Smooth and thin data</a></li>
    <li><a class="dropdown-item" href="../../articles/add_tidal_data.html">Step 4: Add tidal data</a></li>
    <li><a class="dropdown-item" href="../../articles/plot_data.html">Plot data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional tutorials</h6></li>
    <li><a class="dropdown-item" href="../../articles/additional_tutorials/fast_plotting.html">Fast plotting</a></li>
    <li><a class="dropdown-item" href="../../articles/additional_tutorials/add_and_plot_bathymetry_data.html">Add and plot bathymetry data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Package development</h6></li>
    <li><a class="dropdown-item" href="../../articles/package_development/package_maintenance.html">Package maintenance</a></li>
    <li><a class="dropdown-item" href="../../articles/package_development/basemap_data.html">Basemap data</a></li>
    <li><a class="dropdown-item" href="../../articles/package_development/package_logo.html">tools4watlas logo</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../articles/literature/literature.html">Literature</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/allertbijleveld/tools4watlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>Package maintenance</h1>
                        <h4 data-toc-skip class="author">Johannes
Krietsch</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/allertbijleveld/tools4watlas/blob/HEAD/vignettes/package_development/package_maintenance.Rmd" class="external-link"><code>vignettes/package_development/package_maintenance.Rmd</code></a></small>
      <div class="d-none name"><code>package_maintenance.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="contributing-to-tools4watlas">Contributing to <code>tools4watlas</code><a class="anchor" aria-label="anchor" href="#contributing-to-tools4watlas"></a>
</h2>
<p>If you want to contribute to <code>tools4watlas</code> <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo" class="external-link">fork</a>
the repository on GitHub and then submit a <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests" class="external-link">pull
request</a>. Besides clear bug fixes, it is best to discuss potential
changes or additions with <a href="mailto:allert.bijleveld@nioz.nl">Allert Bijleveld</a>.</p>
<p>Before submitting a pull request to the original “upstream”
repository, please make sure the code passes all R CMD checks
(<code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code>) and follow the procedure described
below.</p>
<p>For more details see <a href="https://r-pkgs.org/" class="external-link">R Packages by
Hadley Wickham and Jennifer Bryan</a> and read the documentation of the
used packages.</p>
</div>
<div class="section level2">
<h2 id="working-on-tools4watlas">Working on <code>tools4watlas</code><a class="anchor" aria-label="anchor" href="#working-on-tools4watlas"></a>
</h2>
<p>When contributing, please follow the existing structure of the
repository and <a href="http://adv-r.had.co.nz/Style.html" class="external-link">R style</a>
(see below).</p>
<div class="section level3">
<h3 id="required-packages">Required packages<a class="anchor" aria-label="anchor" href="#required-packages"></a>
</h3>
<p>These are all R packages needed:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/lintr" class="external-link">lintr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/styler" class="external-link">styler</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org" class="external-link">testthat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://covr.r-lib.org" class="external-link">covr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="coding-style">Coding style<a class="anchor" aria-label="anchor" href="#coding-style"></a>
</h3>
<p>Follows the standard <a href="https://style.tidyverse.org/" class="external-link">tidyverse
style</a> and can be checked using <a href="https://lintr.r-lib.org/" class="external-link"><code>lintr</code></a>. You can use <a href="https://styler.r-lib.org/" class="external-link"><code>styler</code></a> to format your
code (will take care of most needed changes, but not all). Only use
style in the file you are working on or selected code. The easiest is to
use the R Studio addin, otherwise use
<code>styler::style_file("my_file.R")</code>.</p>
<p>Note that not all code follows this style at the moment (see <a href="https://github.com/allertbijleveld/tools4watlas/blob/master/.lintr" class="external-link">.lintr</a>
for exclusions), but new code should aim to be consistent with it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># single file</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint</a></span><span class="op">(</span><span class="st">"./file_name.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the whole package</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint_package</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="documentation-and-functions">Documentation and functions<a class="anchor" aria-label="anchor" href="#documentation-and-functions"></a>
</h3>
<p>The package is documented useing <a href="https://roxygen2.r-lib.org/" class="external-link"><code>roxygen2</code></a>. Functions
are in the <a href="https://github.com/allertbijleveld/tools4watlas/tree/master/R" class="external-link">R
folder</a> and always have the prefix <code>atl_</code>. Each function
has a <a href="https://roxygen2.r-lib.org/articles/rd.html" class="external-link"><code>roxygen2 header</code></a>.
This header can be created by using <code>Ctrl + Alt + Shift + R</code>
within a new function, if you’re using RStudio. Optimally, each function
has an runable example. Once done run:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="test-coverage">Test coverage<a class="anchor" aria-label="anchor" href="#test-coverage"></a>
</h3>
<p>Why test your code? Testing your code is crucial for ensuring
reliability, correctness, and maintainability. It helps prevent errors
and ensures that your code works as expected. <code>tools4watlas</code>
uses <a href="https://testthat.r-lib.org/" class="external-link"><code>testthat</code></a> and
code is located in <code>tests/testthat</code> containing one R script
for each function. When adding new functions or code, please add tests
for this code too. Check the code coverage with <a href="https://covr.r-lib.org/" class="external-link"><code>covr</code></a>. For more test
coverage details see <a href="https://app.codecov.io/gh/allertbijleveld/tools4watlas" class="external-link">codecov</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check code coverage</span></span>
<span><span class="fu">covr</span><span class="fu">::</span><span class="fu"><a href="http://covr.r-lib.org/reference/package_coverage.html" class="external-link">package_coverage</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="vignettes-and-articles">Vignettes and articles<a class="anchor" aria-label="anchor" href="#vignettes-and-articles"></a>
</h3>
<p>Vignettes and articles are both types of documentation of an R
packaged. The difference is that vignettes are included in the package
(always checked with <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code> and would be
included on CRAN) and have to run with all data provided with the
package. Articles on the other hand, are not included in the package and
can include links to local data (e.g. that are to large to include in
the package). They are only presented on the package website (see
below). All vignettes are articles, but not all articles are
vignettes.</p>
<div class="section level4">
<h4 id="check-vignettes">Check vignettes<a class="anchor" aria-label="anchor" href="#check-vignettes"></a>
</h4>
<p>To check if the vignettes are correctly compiled, either use the
<code>Knit</code> button in R Studio or build all or single vignettes.
This is also checked when running <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code>, so not
necessary if everything is fine there (but can help when debugging).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check if all vignettes build</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/build_vignettes.html" class="external-link">build_vignettes</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check if single vignette builds</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/build_rmd.html" class="external-link">build_rmd</a></span><span class="op">(</span><span class="st">"vignettes/vignette-name.Rmd"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="check-articles">Check articles<a class="anchor" aria-label="anchor" href="#check-articles"></a>
</h4>
<p>To check if the articles are correctly compiled, either use the
<code>Knit</code> button in R Studio build is using
<code>build_article</code>. Do not build all articles new (lazy =
FALSE), if you did not specify the correct local file path.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check if all articles build</span></span>
<span><span class="co"># (only use lazy = FALSE with correct file path to local files)</span></span>
<span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_articles.html" class="external-link">build_articles</a></span><span class="op">(</span>lazy <span class="op">=</span> <span class="cn">TRUE</span>, preview <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check if single vignette builds</span></span>
<span><span class="co"># (path relative to vignettes folder with no file extension)</span></span>
<span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_articles.html" class="external-link">build_article</a></span><span class="op">(</span><span class="st">"subfolder/article_name"</span>, preview <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="package-website">Package website<a class="anchor" aria-label="anchor" href="#package-website"></a>
</h3>
<p>The package website is build using <a href="https://pkgdown.r-lib.org/" class="external-link"><code>pkgdown</code></a>. It’s
structure is defined in the <a href="https://github.com/allertbijleveld/tools4watlas/blob/master/_pkgdown.yml" class="external-link">_pkgdown.yml</a>.
It is build in the docs folder. Please commit all changes in the docs
folder separately (to make it easier to check changes).</p>
<p>When editing anything simply run with <code>lazy = TRUE</code>.
Otherwise, make sure you have to correct file path in articles that rely
on local data. <code>lazy = FALSE</code> is necessary to run when for
example a new article was added.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># build site new without rebuilding all articles</span></span>
<span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span>lazy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># rebuilds everything (only use with correct file path to local files)</span></span>
<span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="checks-before-pushing-to-github">Checks before pushing to GitHub<a class="anchor" aria-label="anchor" href="#checks-before-pushing-to-github"></a>
</h3>
<p>Summarised steps to check before pushing to GitHub.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set working directory (not necessary if R Studio project)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"C:/Users/..path../tools4watlas"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># lintr</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint_package</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># document</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load all functions</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># build readme (run only if changed)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/build_rmd.html" class="external-link">build_readme</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># tidy description</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/tidyverse.html" class="external-link">use_tidy_description</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># R CMD check</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">check</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># build website (lazy = TRUE only changes files that were edited)</span></span>
<span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span>lazy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Give meaningful commit message and commit everything in the docs
folder with the website separately.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Allert Bijleveld, Pratik Gupte, Christine Beardsworth, Johannes Krietsch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
